# CSS position 속성

## position

- 요소를 실제 화면에서 어디에 위치하게 할 것인지 설정하는 속성
- html 요소를 보여줄 위치를 결정하는 핵심
- 요소를 어떤 기준, 어디에 배치시킬 것인지 설정하는 것
- 속성값 적용 후 추가로 `top`, `right`, `left`, `bottom`에 수치를 넣어 최종 위치 결정(offset)

⭐ offset

특정 위치를 먼저 기준으로 잡은 후, 그 기준에서부터 일정 수치만큼 이동시키는 것

## position의 속성값

```
static | relative | absolute | fixed | sticky
```

### 1. static

기본값. 기준 위치 설정안함

- 모든 html요소의 초기 position값(기본값)
- 정적인 위치지정 방식
- 위치 이동 불가
- 단순히 차례대로 요소를 배치
- 주로 이미 설정된 position 값을 기본값으로 만들기 위해 사용

### 2. relative

현 위치를 기준으로 상대 위치 지정

- 기준점: 요소 자신이 static일 때 배치되는 위치
- 상대적인 위치지정 방식(상대 요소 위치에 따라 자신의 위치를 재조정)
- 실제 배치는 static으로, 보여지는 것은 offset 이용해 위치이동 시키는 개념(화면상 보여지는 모습만 이동시키는 것)
- 때문에 요소는 static일 때 배치되는 곳에 존재하나, 시각적으로는 지정된 수치만큼 떨어져서 보여진다
- offset(위치이동) 후에는 다른 요소들에게 영향을 주지 않기 때문에 실제 페이지 레이아웃에서 relative 적용된 요소가 차지하는 공간은 원래 static이었을 때와 같다
- 직접적으로 움직이는 용도로는 사용하지 않는 편
- 주로 위치상의 부모로 설정하는 것이 목적(아래 자식 요소에서 absolute 적용하기 위해)

### 3. absolute

부모 위치를 기준으로 절대 위치 지정

- 절대적인 위치지정 방식
- 그러나 사실 화면에서 항상 절대적인 위치가 되는것은 아니다
- 요소가 속한 바로 위 부모를 기준으로 위치 설정
- absolute가 적용되기 위해서는 __부모가 absolute, relative, fixed__ 여야 한다
- 형제 요소들과의 위치를 무시하고 부모 위치만 기준으로 따진다
- 만약 부모가 static이라면 조상까지(static아닌 요소를 찾을 때까지) 올라간다
- 만약 모든 상위 요소가 static이면 최상위인 body를 기준점(0,0)으로 한다
- 보통 레이아웃 상 위에 위치한 요소를 relative를 이용해 부모요소로 만든 후, 이동시킬 요소에 absolute를 적용해 부모 위치로부터 떨어지는 용도로 사용
- absolute 적용 시 다른 태그들이 이 속성이 있는 요소를 무시한다(문서 내 위치구분이 없어진다)
- absolute가 적용된 요소는 실제 배치로도 공간이 없다
- 때문에 요소A가 이미 자리잡고 있어도 absolute인 요소B는 옆으로 밀려나지 않고 요소A의 앞/뒤쪽에 붙이는 것이 가능(레이어 개념)
- 다른 요소들과 margin겹침현상이 나타나지 않는다(레이어가 다르기 때문이다)
- 시각적으로 이미지 자체는 겹쳐보일 수 있으니, 앞/뒤로 보여주는 레이어를 바꿀 때에는 추가로 `z-index`를 사용한다
- block이었던 요소도 absolute 적용 시 문서상 위치를 잃게 되면서 시각적인 영역만을 차지하게 되므로, 크기를 바꾸려면 width, height를 설정해야 한다
- 부모의 위치를 기준으로 하지만 실제 그 위치를 벗어나 어디든 갈 수 있다(화면 밖까지도 가능하다)

### 4. fixed

뷰포트(브라우저 화면)를 기준으로 절대 위치 지정, 요소를 해당 위치에 고정

- 고정적인 위치지정 방식
- absolute와 같이 실제 배치에서 배제되고 레이아웃 위에 할당되는 공간도 없어진다(다른 애들과 margin겹칠 일 없음)
- 무조건 뷰포트상의 초기 컨테이너 위(브라우저의 좌표)를 우선기준으로 위치값을 설정한다
- 단, 적용되는 요소의 조상 중 하나가 transform, perspective, filter 속성 중 어느 하나라도 none이 아니면 위치의 기준점은 뷰포트가 아닌 그 조상으로 적용된다(** perspective, filter의 경우 브라우저별로 결과가 다를 수 있다)
- 보통은 뷰포트 화면만 따지기 때문에 absolute보다 더 절대적인 기준으로 위치지정이 가능하다
- 웹페이지가 스크롤 되어도 상관없이 항상 같은 자리에 고정시킬 수 있다
- 부모의 속성/위치에 큰 관계도 없으므로 항상 화면에서 절대적인 위치에서 존재하게 된다
- block이었던 요소도 fixed로 적용 시 문서상 위치를 잃게 되고, 시각적인 영역에서만 존재하게 되므로 width, height로 크기를 설정해야 한다
- 웹페이지 로딩을 느리게 만드는 주 원인이 될 수 있다

### 5. sticky

지정된 위치에 뷰포트가 도달시, 요소가 그 위치에 붙여져 고정된다

- 상대적인 위치 지정(relative), 고정적인 위치 지정(fixed)을 합친 개념이다
- 때문에 실제 배치는 relative처럼 문서의 흐름을 따르고, 스크롤 등으로 어떤 액션이 발생해 위치로 지정한 경계선을 지나면 fixed같은 효과가 적용된다
- 부모(부모가 아니면 그 조상까지)가 overflow가 hidden, scroll, auto또는 overlay속성이 있을 때 달라붙는다
- 만약 sticky로 달라붙은 부모/조상요소가 스크롤이 적용안되고, 정작 실제 스크롤이 되는 요소(또다른 조상)가 따로 존재한다면 sticky속성은 적용되지 않는다
- top, right, bottom, left 중 적어도 한 위치를 경계선의 값(fixed가 적용될 구간)으로 지정해야 한다
- 경계선 값이 없다면 relative와 같은 효과로 적용된다

## Position 속성에서의 주의사항

- position의 값이 주어진 요소(static 제외)들은 레이어 개념처럼 시각적으로 겹쳐져서 앞에 쌓인다
- 만약 position에서 값을 준 요소들끼리 같은 레이어상에서 존재한다면, z-index를 이용해 앞/뒤를 구분시켜줘야 겹침 문제가 해결된다(static은 z-index가 적용되지 않음)
- z-index의 값이 없으면 나중에 적용된 요소가 앞으로 쌓이는 현상이 발생한다
- 쌓임 현상때문에 사용자가 실제 화면을 확대해 텍스트를 크게 보이게 만드는 경우 absolute나 fixed로 배치된 요소들이 실제 확대된 내용(텍스트 등)을 완전히 가려버릴 수 있으므로 UI/UX에 주의해야 한다
- fixed, sticky를 포함하는 스크롤 요소들은 실제 웹 성능과 접근성 문제를 만들어낼 수 있으므로 UI/UX를 고려해 주의하면서 사용해야 한다(문제가 생겼을 때 will-change: transform을 추가해 해결할 수 있다)
- 위치 이동(또는 요소의 속성이 block으로 변경)시 다른 주변의 요소들과 마진겹침 현상이 일어날 수 있으므로 주의한다

⭐ 마진겹침 

상/하의 마진값이 어떤 상황에서 사라지는 현상

자식태그의 마진값이 부모태그의 마진값보다 커지면 => 마진값 사라지면서 위치가 수정된다

마진겹침은 기본적으로 인접한 두 요소가 온전한 block일 때 적용된다


⭐ 마진겹침 예외상황

마주친 요소들 중 어떤 요소가 position: absolute인 것은 예외

마주친 된 요소들 중 어떤 요소가 float: left/right(clear되지 않은 상태)인 것은 예외

마주친 요소들 중 어떤 요소가 display: inline인 것은 예외

마주친 요소들의 관계가 display: flex, 내부요소가 flexbox-item인 것은 예외

마주친 요소들의 관계가 display: grid, 내부요소가 grid-item인 것은 예외
