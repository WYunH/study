# SQL 

- Structured Query Language
- 구조적 쿼리 언어
- 관계형 DB 관리 시스템(RDBMS)의 데이터 관리를 위해 설계된 특수 목적 언어

## 특징

- 대소문자를 구별하지 않는다
- 문장은 한 줄이나 여러 줄에 입력 가능
- 일반적으로 키워드만 대문자 사용, 다른 모든 단어(테이블, 열 이름)는 소문자 사용 권장
- 문장의 마지막 절 끝에 `;`로 명령의 끝을 표시


⭐ 관계형 DB 장점

1. 메타데이터를 총괄 관리할 수 있어 데이터의 성격, 속성 등을 체계화할 수 있다
2. 데이터 표준화를 통해 데이터 품질 확보가 가능하다
3. 예상치 못한 에러를 방지하고 데이터 중복을 피할 수 있다
4. 동시에 병행 관리가 가능해 다수가 함께 입력/수정/삭제 등 데이터를 공유, 조작 가능하다
   
## 종류

## 1. DML 

- Data Manipulation Language
- 데이터 조작(CRUD)를 위해 사용하는 언어
- 구문의 사용 대상은 테이블의 행
- 사용 전 반드시 테이블이 정의되어 있어야한다
- `SELECT`, `INSERT`, `UPDATE`, `DELETE`
- 트랜잭션이 발생하는 SQL이며 취소 가능하다

⭐ 트랜잭션

데이터베이스의 상태를 변화시키기 해서 수행하는 작업의 단위


  1. `SELECT` : 데이터 조회, 검색
  2. `INSERT` : 테이블에 신규 행, 데이터 추가
  3. `UPDATE` : 테이블에 있는 행 수정
  4. `DELETE` : 테이블에서 행 분리, 삭제(`WHERE`절과 함께 사용하지 않으면 테이블 내 모든 행을 삭제, 테이블 구조는 남는다)


### SELECT WHERE 조건식

- 연산자의 조건에 맞는 데이터 검색

1. 비교 연산자

> `=`, `<`, `>`, `<=`, `>=`, `<>` 

2. 논리연산자 

> `AND`, `NOT`, `OR`

3. 기타 

- `BETWEEN` a `AND` b : a, b사이의 데이터 출력(a,b 값 포함)
- `IN` : 연속성이 없는 데이터일 때
- `LIKE` : 문자 형태로 일치하는 데이터 검색(`%` : 모든 문자, `-` : 문자 하나, `#` : 숫자 하나)
- `ANY`, `SOME` : 서브쿼리의 결과 중 한 가지만 만족하면 될 때 
- `ALL` : 여러 결과를 모두 만족시키는 것만


```
SELECT *
FROM song
WHERE country = 'KOR'
AND follow >= 100000; 
```

## 2. DDL 

- Data Definition Language
- 데이터 정의 언어
- DB, 테이블, 뷰, 인덱스 등 데이터 베이스 개체를 생성/삭제/변경하는 역할
- `CREATE`, `DROP`, `ALTER`, `RENAME`
- DDL은 트랜잭션을 발생시키지 않는다
- `COMMIT`, `ROLLBACK` 사용 불가
- 실행 즉시 적용된다


  1. `CREATE` : 새로운 DB나 테이블 생성
  2. `ALTER` : 기존 DB나 테이블 변경
  3. `DROP` : DB 또는 테이블 삭제, `ROLLBACK`으로 복구 불가
  4. `RENAME` : 테이블이나 컬럼명 변경


## 3. DCL 

- Data Control Language
- 데이터 제어 언어
- 사용자에게 권한 부여/제거시 사용
- `GRANT`, `REVOKE`, `COMMIT`, `ROLLBACK`

  1. `GRANT` : 특정 권한 부여
  2. `REVOKE` : 특정 권한 회수
  3. `COMMIT` : 변경된 내용 영구 적용
  4. `ROLLBACK` : 변경 이전 값으로 되돌리기


## 기타 

### Sub Query 

- 쿼리문 안에 또 다른 SELECT문이 들어가 있는 것 
- 서브 쿼리의 결과가 둘 이상이면 에러
- 메인 쿼리의 실행전 한번 실행된다
- `( )`를 사용해 묶어 사용한다


### `ORDER BY`

- 결과가 출력되는 순서를 조절하는 구문
- 기본 순서는 오름차순(ASC)
- 열 뒤 `DESC` 사용 시 내림차순
- 혼합 사용 가능


### `DISTINCT`

- 중복을 1개만 보여주면서 출력
- 테이블 크기가 클수록 효율적

### `LIMIT`

- 출력 개수 제한
- 상위 N개만 출력
- 쿼리문 개선으로 서버 성능을 올릴 때 사용


### `JOIN`

- 둘 이상의 테이블을 연결해 데이터 검색
- Primary Key 및 Foreign Key 값을 사용한다

1. INNER JOIN - 교집합만 조인
2. OUTER JOIN - 좌/우 테이블 기준 전체에 대한 조인, 값이 없으면 NULL로 처리


### `SHOW` 

```
SHOW DATABASES
SHOW 테이블명
SHOW 테이블명 STATUS
```

현재 서버의 DB, 테이블 상태와 정보 확인

### `USE`

- 사용할 DB 지정
- 지정 후 다시 `USE`를 사용하거나 다른 DB사용을 명시하지 않는 이상 SQL문이 기존 DB에서 수행
- Workbench에서 선택해 사용 가능


### `DESCRIBE` (`DESC`)

- 특정 테이블의 열 정보 보기
